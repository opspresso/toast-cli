# Toaster 개선사항

## 보안 관련

- [x] SSH StrictHostKeyChecking 설정 변경
  - 문제: `no` 설정으로 인한 MITM 공격 취약점
  - 해결: `accept-new`로 변경하여 보안 강화

- [x] AWS 자격 증명 파일 권한 관리
  - 문제: 백업 파일(.aws/credentials.backup)의 권한이 설정되지 않음
  - 해결: 백업 파일 생성 시 600 권한 설정 추가됨

## 에러 처리

- [ ] AWS CLI 명령어 에러 처리 개선
  - 문제: AWS CLI 명령 실행 결과에 대한 상세한 에러 처리 부족
  - 개선: 각 AWS CLI 명령어에 대한 구체적인 에러 메시지와 처리 로직 추가

- [ ] JSON 파싱 에러 처리
  - 문제: jq 명령어 실행 시 에러 처리 부재
  - 개선: jq 명령어 실행 결과 검증 및 에러 처리 로직 추가

## 환경 변수

- [x] AWS 리전 설정 개선
  - 문제: AWS_REGION만 설정되고 AWS_DEFAULT_REGION은 설정되지 않음
  - 해결: AWS_DEFAULT_REGION도 함께 설정되도록 개선됨

- [ ] 환경 변수 export 처리
  - 문제: 일부 환경 변수가 export 되지 않은 채로 사용됨
  - 개선: 필요한 환경 변수들의 export 처리 추가

## 코드 구조

- [ ] Git 관련 함수 리팩토링
  - 문제: git 관련 함수들이 너무 길고 복잡함
  - 개선: 작은 단위의 함수로 분리하여 유지보수성 향상

- [ ] 전역 변수 사용 최소화
  - 문제: 과도한 전역 변수 사용으로 코드 예측 가능성 저하
  - 개선: 함수 매개변수 활용 및 지역 변수 사용 확대

## 버전 관리

- [ ] 버전 관리 시스템 개선
  - 문제: THIS_VERSION이 하드코딩되어 있음 (v0.0.0)
  - 개선: 외부 설정 파일이나 git 태그를 활용한 버전 관리 구현

## 임시 파일 처리

- [ ] 임시 파일 관리 개선
  - 문제: 임시 파일이 항상 적절히 정리되지 않음
  - 개선: trap 명령어를 활용한 종료 시 임시 파일 정리 로직 추가

- [ ] 임시 파일 이름 충돌 방지
  - 문제: 고정된 임시 파일 이름으로 인한 동시 실행 시 충돌 가능성
  - 개선: mktemp 활용하여 유니크한 임시 파일 이름 생성

## 호환성

- [ ] 크로스 플랫폼 명령어 호환성
  - 문제: 일부 명령어의 Linux/macOS 호환성만 고려됨
  - 개선: 더 많은 명령어에 대한 OS별 분기 처리 추가

## 기능 개선

- [ ] MFA 토큰 검증 로직
  - 문제: MFA 토큰 입력 시 기본적인 검증 부재
  - 개선: 토큰 형식 및 길이 검증 로직 추가

- [ ] 사용자 입력 값 검증
  - 문제: 일부 기능에서 사용자 입력 값 검증 부족
  - 개선: 각 입력 값에 대한 적절한 유효성 검사 추가
